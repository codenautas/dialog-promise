<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Dialog Promise examples</title>
    <link rel="stylesheet" type="text/css" href="popup-dp.css">
    <link rel="stylesheet" type="text/css" href="../lib/dialog-promise.css">
  </head>
  <body>
    <h1>Dialog Promise examples</h1>
    <div style="float: left; margin:30px">
        <p>
          <button id=alert_example1>Alert example</button>
        </p>
        <p>
          <button id=confirm_example1>Confirm example</button>
        </p>
        <p>
          <button id=prompt_example1>Prompt example</button>
        </p>
        <p>
          <button id=menu_example1>menu example</button>
        </p>
        <p>
          <button id=menu_example2>menu without [X] here</button>
        </p>
        <p>
          <button id=bigdialog_example1>Big dialog</button>
        </p>
    </div>
    <p>
      <button id=toggle_close>Toggle close button</button>
    </p>
    <p>
      <button id=toggle_reject>Toggle reject</button>
    </p>
    <p>
      <button id=set_spanish>Set spanish</button>
    </p>
    <p>
      <button id=add_lines>Add many lines</button>
    </p>
    <p>Results:</p>
    <pre id=results></pre>
    <script src="../node_modules/es6-promise/dist/es6-promise.min.js"></script>
    <script src="../lib/dialog-promise.js"></script>
<script>

function seeReject(err){
    results.textContent+='\n'+'CATCHED: '+err.message;
    results.textContent+='\n'+'STACK: '+err.stack;
}

window.addEventListener('load', function(){
    results.textContent+='Initiated';
    add_lines.addEventListener('click', function(){
        for(var i=1; i<=1000; i++){
            results.textContent+='\n'+'Adding line '+i;
        }
    });
    alert_example1.addEventListener('click', function(){
        results.textContent+='\nFirstClick';
        alertPromise('First example').then(function(result){
            results.textContent+='\n'+'Alert window closed: '+result;
        }).catch(seeReject);
    });
    confirm_example1.addEventListener('click', function(){
        confirmPromise('Do you like this example?').then(function(result){
            results.textContent+='\n'+'Like confirm: '+result;
        }).catch(seeReject);
    });
    prompt_example1.addEventListener('click', function(){
        promptPromise('What is your name?').then(function(result){
            results.textContent+='\n'+'You typed: '+result;
        }).catch(seeReject);
    });
    bigdialog_example1.addEventListener('click', function(){
        dialogPromise(function(mainElement, done){
            mainElement.innerHTML='<div><img src=pizarra.png style="width:120px; height:100px;"><h1>This is a very big message window</h1><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas semper leo ac euismod euismod. Ut efficitur, sem quis laoreet luctus, turpis leo accumsan dolor, quis scelerisque nibh metus hendrerit elit. Phasellus in finibus augue. Morbi nec metus et risus scelerisque scelerisque id non urna. Sed hendrerit at metus viverra pellentesque. Integer tempus nunc dolor, et vehicula nunc condimentum dignissim. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Nullam dapibus ipsum a ante commodo sodales. Integer turpis nisl, ultrices sit amet condimentum ac, rhoncus eget magna. Phasellus quis felis eros. Donec porttitor cursus odio, non scelerisque nisl interdum quis. Cras in egestas lectus.<img src="Oxygen480-actions-key-enter.svg.png" style="width:240px; height:240px;">';
            var imgs=mainElement.querySelectorAll('img');
            Array.prototype.forEach.call(imgs,function(img){
                img.onclick=function(){ done(img.src); };
            });
        }).then(function(result){
            results.textContent+='\n'+'You typed: '+result;
        }).catch(seeReject);
    });
    var thisMenu=function(opts){
        return function(){
            miniMenuPromise([
                {value:'1a', img:'1a.png', label:'first option'},
                {value:'2b', img:'2b.png', label:'second b'},
                {value:'3c', img:'3c.png', label:'last one'},
            ],opts).then(function(result){
                results.textContent+='\n'+'You typed: '+result;
            }).catch(seeReject);
        }
    };
    menu_example1.addEventListener('click', thisMenu());
    menu_example2.addEventListener('click', thisMenu({underElement:menu_example2, withCloseButton:false}));
    set_spanish.addEventListener('click', function(){
        DialogPromise.messages=DialogPromise.es;
    });
    toggle_close.addEventListener('click', function(){
        DialogPromise.defaultOpts.withCloseButton=!DialogPromise.defaultOpts.withCloseButton;
    });
    toggle_reject.addEventListener('click', function(){
        DialogPromise.defaultOpts.reject=!DialogPromise.defaultOpts.reject;
    });
});
    
</script>

</body>
</html>
